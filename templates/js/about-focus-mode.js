class AboutFocusMode{constructor(){this.focusMode=!1,this.selectedIndex=0,this.items=[],this.init()}init(){document.addEventListener("keydown",e=>this.handleKeyPress(e))}handleKeyPress(e){var t=document.activeElement;t&&("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)||("i"!==e.key||this.focusMode?"q"===e.key&&this.focusMode?(e.preventDefault(),this.exitFocusMode()):this.focusMode&&("Escape"===e.key?(e.preventDefault(),this.temporarilyExitFocusMode()):"ArrowDown"===e.key?(e.preventDefault(),this.selectedIndex<this.items.length-1&&(this.selectedIndex++,this.updateSelection())):"ArrowUp"===e.key?(e.preventDefault(),0<this.selectedIndex&&(this.selectedIndex--,this.updateSelection())):"Enter"===e.key&&(e.preventDefault(),this.scrollToCard())):(e.preventDefault(),this.enterFocusMode()))}enterFocusMode(){this.focusMode=!0,this.selectedIndex=0,document.body.classList.add("about-focus-mode"),this.collectItems(),this.updateSelection(),this.showToast("已进入关于页面聚焦模式 (按 q 退出，上下键导航)")}exitFocusMode(){this.focusMode=!1,document.body.classList.remove("about-focus-mode"),this.clearSelection(),this.showToast("已退出关于页面聚焦模式")}temporarilyExitFocusMode(){document.body.classList.remove("about-focus-mode"),this.clearSelection(),this.showToast("聚焦模式已暂停 (按 i 重新进入)");const t=e=>{"i"===e.key&&(e.preventDefault(),document.removeEventListener("keydown",t),this.enterFocusMode())};document.addEventListener("keydown",t)}collectItems(){this.items=[],document.querySelectorAll(".about-card").forEach(e=>{this.items.push({element:e,type:"main-card",title:e.querySelector("h2")?.textContent||"卡片"})}),document.querySelectorAll(".feature-item").forEach(e=>{this.items.push({element:e,type:"feature",title:e.querySelector("h3")?.textContent||"特性"})}),document.querySelectorAll(".team-member").forEach(e=>{this.items.push({element:e,type:"team",title:e.querySelector("h3")?.textContent||"团队成员"})}),document.querySelectorAll(".contact-item").forEach(e=>{this.items.push({element:e,type:"contact",title:e.querySelector("h3")?.textContent||"联系方式"})})}updateSelection(){var e;this.clearSelection(),this.items[this.selectedIndex]&&((e=this.items[this.selectedIndex]).element.classList.add("about-focus-selected"),e.element.scrollIntoView({behavior:"smooth",block:"center"}))}clearSelection(){document.querySelectorAll(".about-focus-selected").forEach(e=>{e.classList.remove("about-focus-selected")})}scrollToCard(){var e;this.items[this.selectedIndex]&&((e=this.items[this.selectedIndex]).element.scrollIntoView({behavior:"smooth",block:"start"}),this.showToast("查看: "+e.title))}showToast(e){const t=document.createElement("div");t.className="about-focus-toast",t.textContent=e,document.body.appendChild(t),setTimeout(()=>{t.classList.add("show")},10),setTimeout(()=>{t.classList.remove("show"),setTimeout(()=>t.remove(),300)},2e3)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.aboutFocusMode=new AboutFocusMode}):window.aboutFocusMode=new AboutFocusMode;
